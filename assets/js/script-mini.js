<script>Â  Â  Â  Â 
Â  Â  Â  window.addEventListener('scroll',()=>{Â  Â  Â  Â  const scrollPercentage=(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight))*100;Â  Â  Â  Â  if(scrollPercentage>=25)dataLayer.push({event:'scroll_depth','scroll_percentage':25});Â  Â  Â  Â  if(scrollPercentage>=50)dataLayer.push({event:'scroll_depth','scroll_percentage':50});Â  Â  Â  Â  if(scrollPercentage>=75)dataLayer.push({event:'scroll_depth','scroll_percentage':75});Â  Â  Â  Â  if(scrollPercentage>=90)dataLayer.push({event:'scroll_depth','scroll_percentage':90});Â  Â  Â },{passive:!0});Â  Â  Â 
Â  Â  Â  document.addEventListener('DOMContentLoaded',function(){Â  Â  Â  Â  const ctaButtons=document.querySelectorAll('a[href="#order-btn"], a[href="#order-btn-fr"], a[href="#order-btn-ar"], button[onclick^="openCheckoutModal"]');Â  Â  Â  Â  ctaButtons.forEach(btn=>{Â  Â  Â  Â  Â  btn.addEventListener('click',()=>{Â  Â  Â  Â  Â  Â  dataLayer.push({event:'cta_click','cta_label':btn.innerText||'Buy Now'});Â  Â  Â  Â  Â });Â  Â  Â  Â });Â  Â  Â });Â  Â  Â 
Â  Â  Â  function pushOrderData(orderData){Â  Â  Â  Â  dataLayer.push({Â  Â  Â  Â  Â  event:'purchase',Â  Â  Â  Â  Â  ecommerce:{Â  Â  Â  Â  Â  Â  Â  transaction_id:orderData.orderId,Â  Â  Â  Â  Â  Â  Â  value:orderData.productPrice,Â  Â  Â  Â  Â  Â  Â  currency:'MAD',Â  Â  Â  Â  Â  Â  Â  items:[{Â  Â  Â  Â  Â  Â  Â  Â  item_id:orderData.sku,Â  Â  Â  Â  Â  Â  Â  Â  item_name:orderData.productTitle,Â  Â  Â  Â  Â  Â  Â  Â  quantity:orderData.productVariant,Â  Â  Â  Â  Â  Â  Â  Â  price:orderData.productPrice
Â  Â  Â  Â  Â  Â  Â }]
Â  Â  Â  Â  Â }
Â  Â  Â  Â });Â  Â  Â }
Â  Â  Â  Â 
Â  Â  Â  Â  const translations={Â  Â  Â  Â  Â  Â  en:{Â  Â  Â  Â  Â  Â  Â  Â  CompleteOrder:"Complete Your Order",Â  Â  Â  Â  Â  Â  Â  Â  FillDetails:"Fill out the details below to checkout.",Â  Â  Â  Â  Â  Â  Â  Â  ProductDetails:"Product Details",Â  Â  Â  Â  Â  Â  Â  Â  ProductName:"Smooth Sleep",Â  Â  Â  Â  Â  Â  Â  Â  Quantity:"Quantity",Â  Â  Â  Â  Â  Â  Â  Â  SelectQuantity:"Select a quantity",Â  Â  Â  Â  Â  Â  Â  Â  Bottle1:"1 Bottle",Â  Â  Â  Â  Â  Â  Â  Â  Bottle3:"3 Bottles",Â  Â  Â  Â  Â  Â  Â  Â  Bottle5:"5 Bottles",Â  Â  Â  Â  Â  Â  Â  Â  YourDetails:"Your Details",Â  Â  Â  Â  Â  Â  Â  Â  FullName:"Full Name",Â  Â  Â  Â  Â  Â  Â  Â  FullNamePlaceholder:"Enter Your Name*",Â  Â  Â  Â  Â  Â  Â  Â  PhoneNumber:"Phone Number",Â  Â  Â  Â  Â  Â  Â  Â  PhoneNumberPlaceholder:"+212 600-000000",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPhoneNumber:"Confirm Phone Number",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPhoneNumberPlaceholder:"Re-enter phone number",Â  Â  Â  Â  Â  Â  Â  Â  FullAddress:"Full Address",Â  Â  Â  Â  Â  Â  Â  Â  FullAddressPlaceholder:"Street, City, etc.",Â  Â  Â  Â  Â  Â  Â  Â  ValidPhone:"Please enter a valid phone number.",Â  Â  Â  Â  Â  Â  Â  Â  PhoneMismatch:"Phone numbers do not match.",Â  Â  Â  Â  Â  Â  Â  Â  SubmitOrder:"Submit Order",Â  Â  Â  Â  Â  Â  Â  Â  OrderConfirmed:"Order Confirmed!",Â  Â  Â  Â  Â  Â  Â  Â  Redirecting:"Redirecting to WhatsApp...",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmDetails:"Please Confirm Your Details",Â  Â  Â  Â  Â  Â  Â  Â  OrderID:"Order ID",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmName:"Name",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPhone:"Phone",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmAddress:"Address",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmCallTime:"Consultation Time",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmDeliveryNote:"Delivery Note",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmQuantity:"Quantity",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPrice:"Price",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmCorrect:"Is this information correct?",Â  Â  Â  Â  Â  Â  Â  Â  EditButton:"No, Edit",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmButton:"Yes, Go!",Â  Â  Â  Â  Â  Â  Â  Â  Processing:'Processing...',Â  Â  Â  Â  Â  Â  Â  Â  Next:'Next',Â  Â  Â  Â  Â  Â  Â  Â  Back:'Back',Â  Â  Â  Â  Â  Â  Â  Â  AdditionalInfo:"Additional Info",Â  Â  Â  Â  Â  Â  Â  Â  CallTime:"Preferred call time for free consultation",Â  Â  Â  Â  Â  Â  Â  Â  DeliveryNote:"Delivery Note (Optional)",Â  Â  Â  Â  Â  Â  Â  Â  DeliveryNotePlaceholder:"e.g., leave with the concierge, call upon arrival...",Â  Â  Â  Â  Â  Â  Â  Â  ClientNote:"(Client Note): please call me at {time} for consultation and confirmation",Â  Â  Â  Â  Â  Â  Â  Â  SellerNote:"(Seller Note): im replacing confirmation call to consultation call to convert maximum leads to delivered orders",Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â },Â  Â  Â  Â  Â  Â  fr:{Â  Â  Â  Â  Â  Â  Â  Â  CompleteOrder:"ComplÃ©tez votre commande",Â  Â  Â  Â  Â  Â  Â  Â  FillDetails:"Remplissez les dÃ©tails ci-dessous pour finaliser.",Â  Â  Â  Â  Â  Â  Â  Â  ProductDetails:"DÃ©tails du produit",Â  Â  Â  Â  Â  Â  Â  Â  ProductName:"Smooth Sleep",Â  Â  Â  Â  Â  Â  Â  Â  Quantity:"QuantitÃ©",Â  Â  Â  Â  Â  Â  Â  Â  SelectQuantity:"SÃ©lectionnez une quantitÃ©",Â  Â  Â  Â  Â  Â  Â  Â  Bottle1:"1 Bouteille",Â  Â  Â  Â  Â  Â  Â  Â  Bottle3:"3 Bouteilles",Â  Â  Â  Â  Â  Â  Â  Â  Bottle5:"5 Bouteilles",Â  Â  Â  Â  Â  Â  Â  Â  YourDetails:"Vos coordonnÃ©es",Â  Â  Â  Â  Â  Â  Â  Â  FullName:"Nom complet",Â  Â  Â  Â  Â  Â  Â  Â  FullNamePlaceholder:"Entrez votre nom complet*",Â  Â  Â  Â  Â  Â  Â  Â  PhoneNumber:"NumÃ©ro de tÃ©lÃ©phone",Â  Â  Â  Â  Â  Â  Â  Â  PhoneNumberPlaceholder:"+212 600-000000",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPhoneNumber:"Confirmez le numÃ©ro de tÃ©lÃ©phone",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPhoneNumberPlaceholder:"Retapez le numÃ©ro de tÃ©lÃ©phone",Â  Â  Â  Â  Â  Â  Â  Â  FullAddress:"Adresse complÃ¨te",Â  Â  Â  Â  Â  Â  Â  Â  FullAddressPlaceholder:"Rue, Ville, etc.",Â  Â  Â  Â  Â  Â  Â  Â  ValidPhone:"Veuillez entrer un numÃ©ro de tÃ©lÃ©phone valide.",Â  Â  Â  Â  Â  Â  Â  Â  PhoneMismatch:"Les numÃ©ros de tÃ©lÃ©phone ne correspondent pas.",Â  Â  Â  Â  Â  Â  Â  Â  SubmitOrder:"Valider la commande",Â  Â  Â  Â  Â  Â  Â  Â  OrderConfirmed:"Commande confirmÃ©e !",Â  Â  Â  Â  Â  Â  Â  Â  Redirecting:"Redirection vers WhatsApp...",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmDetails:"Veuillez confirmer vos informations",Â  Â  Â  Â  Â  Â  Â  Â  OrderID:"ID de commande",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmName:"Nom",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPhone:"TÃ©lÃ©phone",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmAddress:"Adresse",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmCallTime:"Heure de consultation",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmDeliveryNote:"Note de livraison",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmQuantity:"QuantitÃ©",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPrice:"Prix",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmCorrect:"Ces informations sont-elles correctes ?",Â  Â  Â  Â  Â  Â  Â  Â  EditButton:"Non, Modifier",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmButton:"Oui, Continuer !",Â  Â  Â  Â  Â  Â  Â  Â  Processing:'Traitement...',Â  Â  Â  Â  Â  Â  Â  Â  Next:'Suivant',Â  Â  Â  Â  Â  Â  Â  Â  Back:'Retour',Â  Â  Â  Â  Â  Â  Â  Â  AdditionalInfo:"Informations supplÃ©mentaires",Â  Â  Â  Â  Â  Â  Â  Â  CallTime:"Heure d'appel prÃ©fÃ©rÃ©e pour la consultation gratuite",Â  Â  Â  Â  Â  Â  Â  Â  DeliveryNote:"Note de livraison (Facultatif)",Â  Â  Â  Â  Â  Â  Â  Â  DeliveryNotePlaceholder:"ex: laisser chez le concierge, appeler Ã  l'arrivÃ©e...",Â  Â  Â  Â  Â  Â  Â  Â  ClientNote:"(Note client) : veuillez m'appeler au {time} pour consultation et confirmation",Â  Â  Â  Â  Â  Â  Â  Â  SellerNote:"(Note du vendeur) : je remplace l'appel de confirmation par un appel de consultation pour convertir un maximum de prospects en commandes livrÃ©es",Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â },Â  Â  Â  Â  Â  Â  ar:{Â  Â  Â  Â  Â  Â  Â  Â  CompleteOrder:"Ø£ÙƒÙ…Ù„ Ø·Ù„Ø¨Ùƒ",Â  Â  Â  Â  Â  Â  Â  Â  FillDetails:"Ø§Ù…Ù„Ø£ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø£Ø¯Ù†Ø§Ù‡ Ù„Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡.",Â  Â  Â  Â  Â  Â  Â  Â  ProductDetails:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬",Â  Â  Â  Â  Â  Â  Â  Â  ProductName:"Ø³Ù…ÙˆØ« Ø³Ù„ÙŠØ¨",Â  Â  Â  Â  Â  Â  Â  Â  Quantity:"Ø§Ù„ÙƒÙ…ÙŠØ©",Â  Â  Â  Â  Â  Â  Â  Â  SelectQuantity:"Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ…ÙŠØ©",Â  Â  Â  Â  Â  Â  Â  Â  Bottle1:"Ø²Ø¬Ø§Ø¬Ø© ÙˆØ§Ø­Ø¯Ø©",Â  Â  Â  Â  Â  Â  Â  Â  Bottle3:"3 Ø²Ø¬Ø§Ø¬Ø§Øª",Â  Â  Â  Â  Â  Â  Â  Â  Bottle5:"5 Ø²Ø¬Ø§Ø¬Ø§Øª",Â  Â  Â  Â  Â  Â  Â  Â  YourDetails:"ØªÙØ§ØµÙŠÙ„Ùƒ Ø§Ù„Ø´Ø®ØµÙŠØ©",Â  Â  Â  Â  Â  Â  Â  Â  FullName:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",Â  Â  Â  Â  Â  Â  Â  Â  FullNamePlaceholder:"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„*",Â  Â  Â  Â  Â  Â  Â  Â  PhoneNumber:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",Â  Â  Â  Â  Â  Â  Â  Â  PhoneNumberPlaceholder:"+212 600-000000",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPhoneNumber:"ØªØ£ÙƒÙŠØ¯ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPhoneNumberPlaceholder:"Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",Â  Â  Â  Â  Â  Â  Â  Â  FullAddress:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„",Â  Â  Â  Â  Â  Â  Â  Â  FullAddressPlaceholder:"Ø§Ù„Ø´Ø§Ø±Ø¹ØŒ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ Ø¥Ù„Ø®.",Â  Â  Â  Â  Â  Â  Â  Â  ValidPhone:"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­.",Â  Â  Â  Â  Â  Â  Â  Â  PhoneMismatch:"Ø±Ù‚Ù…Ø§ Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚ÙŠÙ†.",Â  Â  Â  Â  Â  Â  Â  Â  SubmitOrder:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨",Â  Â  Â  Â  Â  Â  Â  Â  OrderConfirmed:"ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨!",Â  Â  Â  Â  Â  Â  Â  Â  Redirecting:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨...",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmDetails:"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ",Â  Â  Â  Â  Â  Â  Â  Â  OrderID:"Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmName:"Ø§Ù„Ø§Ø³Ù…",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPhone:"Ø§Ù„Ù‡Ø§ØªÙ",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmAddress:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmCallTime:"ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø©",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmDeliveryNote:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªØ³Ù„ÙŠÙ…",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmQuantity:"Ø§Ù„ÙƒÙ…ÙŠØ©",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmPrice:"Ø§Ù„Ø³Ø¹Ø±",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmCorrect:"Ù‡Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØµØ­ÙŠØ­Ø©ØŸ",Â  Â  Â  Â  Â  Â  Â  Â  EditButton:"Ù„Ø§ØŒ ØªØ¹Ø¯ÙŠÙ„",Â  Â  Â  Â  Â  Â  Â  Â  ConfirmButton:"Ù†Ø¹Ù…ØŒ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨!",Â  Â  Â  Â  Â  Â  Â  Â  Processing:'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...',Â  Â  Â  Â  Â  Â  Â  Â  Next:'Ø§Ù„ØªØ§Ù„ÙŠ',Â  Â  Â  Â  Â  Â  Â  Â  Back:'Ø±Ø¬ÙˆØ¹',Â  Â  Â  Â  Â  Â  Â  Â  AdditionalInfo:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©",Â  Â  Â  Â  Â  Â  Â  Â  CallTime:"Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØ¶Ù„ Ù„Ù„Ø§ØªØµØ§Ù„ Ù„Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",Â  Â  Â  Â  Â  Â  Â  Â  DeliveryNote:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªØ³Ù„ÙŠÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",Â  Â  Â  Â  Â  Â  Â  Â  DeliveryNotePlaceholder:"Ù…Ø«Ø§Ù„: Ø§ØªØ±ÙƒÙ‡Ø§ Ù…Ø¹ Ø§Ù„Ø¨ÙˆØ§Ø¨ØŒ Ø§ØªØµÙ„ Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„...",Â  Â  Â  Â  Â  Â  Â  Â  ClientNote:"(Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„): ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙŠ Ø¹Ù„Ù‰ {time} Ù„Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© ÙˆØ§Ù„ØªØ£ÙƒÙŠØ¯",Â  Â  Â  Â  Â  Â  Â  Â  SellerNote:"(Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¨Ø§Ø¦Ø¹): Ø£Ù‚ÙˆÙ… Ø¨Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù…ÙƒØ§Ù„Ù…Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø¨Ù…ÙƒØ§Ù„Ù…Ø© Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† Ø¥Ù„Ù‰ Ø·Ù„Ø¨Ø§Øª ØªÙ… ØªØ³Ù„ÙŠÙ…Ù‡Ø§",Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â };Â  Â  Â  Â  let currentLang=localStorage.getItem('selectedLang')||'en';Â  Â  Â  Â  const pageContent=document.getElementById('page-content');Â  Â  Â  Â  const langContents=document.querySelectorAll('.lang-content');Â  Â  Â  Â  const langSwitchers=document.querySelectorAll('.lang-switcher');Â  Â  Â  Â  const htmlTag=document.documentElement;Â  Â  Â  Â  function updateFormLanguage(lang){Â  Â  Â  Â  Â  Â  const formContainer=document.getElementById('form-container');Â  Â  Â  Â  Â  Â  if(!formContainer)return;Â  Â  Â  Â  Â  Â  currentLang=lang;Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.querySelectorAll('[data-lang-key]').forEach(el=>{Â  Â  Â  Â  Â  Â  Â  Â  const key=el.getAttribute('data-lang-key');Â  Â  Â  Â  Â  Â  Â  Â  if(translations[lang]&&translations[lang][key]){Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(el.tagName==='INPUT'||el.tagName==='TEXTAREA'){Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  el.placeholder=translations[lang][key];Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }else{Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  el.innerText=translations[lang][key];Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â });Â  Â  Â  Â }
Â  Â  Â  Â Â 
Â  Â  Â  Â  function switchLang(lang){Â  Â  Â  Â  Â  Â  currentLang=lang;Â  Â  Â  Â  Â  Â  localStorage.setItem('selectedLang',lang);Â  Â  Â  Â  Â  Â  htmlTag.lang=lang;Â  Â  Â  Â  Â  Â  const checkoutModalBody=document.getElementById('checkout-modal-body');Â  Â  Â  Â  Â  Â  const formContainer=document.getElementById('form-container');Â  Â  Â  Â  Â  Â  if(lang==='ar'){Â  Â  Â  Â  Â  Â  Â  Â  checkoutModalBody.classList.add('rtl');Â  Â  Â  Â  Â  Â  Â  Â  checkoutModalBody.classList.remove('ltr');Â  Â  Â  Â  Â  Â  Â  Â  formContainer.setAttribute('dir','rtl');Â  Â  Â  Â  Â  Â }else{Â  Â  Â  Â  Â  Â  Â  Â  checkoutModalBody.classList.add('ltr');Â  Â  Â  Â  Â  Â  Â  Â  checkoutModalBody.classList.remove('rtl');Â  Â  Â  Â  Â  Â  Â  Â  formContainer.setAttribute('dir','ltr');Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  const confirmBox=document.getElementById('confirmation-details-box');Â  Â  Â  Â  Â  Â  if(confirmBox){Â  Â  Â  Â  Â  Â  Â  if(lang==='ar'){Â  Â  Â  Â  Â  Â  Â  Â  confirmBox.setAttribute('dir','rtl');Â  Â  Â  Â  Â  Â  Â  Â  confirmBox.classList.remove('text-left');Â  Â  Â  Â  Â  Â  Â  Â  confirmBox.classList.add('text-right');Â  Â  Â  Â  Â  Â  Â }else{Â  Â  Â  Â  Â  Â  Â  Â  confirmBox.setAttribute('dir','ltr');Â  Â  Â  Â  Â  Â  Â  Â  confirmBox.classList.remove('text-right');Â  Â  Â  Â  Â  Â  Â  Â  confirmBox.classList.add('text-left');Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  langContents.forEach(content=>{Â  Â  Â  Â  Â  Â  Â  Â  content.classList.remove('active');Â  Â  Â  Â  Â  Â  Â  Â  if(content.id===`lang-${lang}`){Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  content.classList.add('active');Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â });Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  langSwitchers.forEach(switcher=>{Â  Â  Â  Â  Â  Â  Â  Â  switcher.classList.remove('bg-indigo-600','text-white','shadow-md');Â  Â  Â  Â  Â  Â  Â  Â  switcher.classList.add('text-gray-600');Â  Â  Â  Â  Â  Â  Â  Â  if(switcher.dataset.lang===lang){Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switcher.classList.add('bg-indigo-600','text-white','shadow-md');Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switcher.classList.remove('text-gray-600');Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â });Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  updateFormLanguage(lang);Â  Â  Â  Â }
Â  Â  Â  Â Â 
Â  Â  Â  Â 
Â  Â  Â  Â  document.querySelectorAll('.faq-question').forEach(question=>{Â  Â  Â  Â  Â  Â  question.addEventListener('click',()=>{Â  Â  Â  Â  Â  Â  Â  Â  const alreadyActive=question.classList.contains('active');Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('.faq-question').forEach(q=>q.classList.remove('active'));Â  Â  Â  Â  Â  Â  Â  Â  if(!alreadyActive){Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  question.classList.add('active');Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â });Â  Â  Â  Â });Â  Â  Â  Â 
Â  Â  Â  Â  const checkoutModal=document.getElementById('checkout-modal-body');Â  Â  Â  Â  const variantSelect=document.getElementById('product-variant');Â  Â  Â  Â  const priceDisplay=document.getElementById('product-price');Â  Â  Â  Â  const currencySymbol='MAD';Â  Â  Â  Â Â 
Â  Â  Â  Â  const formStep1=document.getElementById('form-step-1');Â  Â  Â  Â  const formStep2=document.getElementById('form-step-2');Â  Â  Â  Â  const formStep3=document.getElementById('form-step-3');Â  Â  Â  Â  const nextButton=document.getElementById('next-button');Â  Â  Â  Â  const nextButtonStep2=document.getElementById('next-button-step2');Â  Â  Â  Â  const backButtonStep2=document.getElementById('back-button-step2');Â  Â  Â  Â  const backButtonStep3=document.getElementById('back-button-step3');Â  Â  Â  Â  function showStep(step){Â  Â  Â  Â  Â  Â  formStep1.classList.toggle('hidden',step!==1);Â  Â  Â  Â  Â  Â  formStep2.classList.toggle('hidden',step!==2);Â  Â  Â  Â  Â  Â  formStep3.classList.toggle('hidden',step!==3);Â  Â  Â  Â }
Â  Â  Â  Â  nextButton.addEventListener('click',()=>{Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  if(variantSelect.checkValidity()){Â  Â  Â  Â  Â  Â  Â  Â  showStep(2);Â  Â  Â  Â  Â  Â }else{Â  Â  Â  Â  Â  Â  Â  Â  variantSelect.reportValidity();Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â });Â  Â  Â  Â Â 
Â  Â  Â  Â  nextButtonStep2.addEventListener('click',()=>{Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  if(!fullNameInput.checkValidity()||!phoneInput.checkValidity()||!confirmPhoneInput.checkValidity()||!addressInput.checkValidity()){Â  Â  Â  Â  Â  Â  Â  Â  form.reportValidity();Â  Â  Â  Â  Â  Â  Â  Â  return;Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  if(phoneInput.value.trim().length<9){Â  Â  Â  Â  Â  Â  Â  Â  phoneFormatError.classList.remove('hidden');Â  Â  Â  Â  Â  Â  Â  Â  phoneInput.focus();Â  Â  Â  Â  Â  Â  Â  Â  return;Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  if(phoneInput.value!==confirmPhoneInput.value){Â  Â  Â  Â  Â  Â  Â  Â  phoneMismatchError.classList.remove('hidden');Â  Â  Â  Â  Â  Â  Â  Â  confirmPhoneInput.focus();Â  Â  Â  Â  Â  Â  Â  Â  return;Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  phoneFormatError.classList.add('hidden');Â  Â  Â  Â  Â  Â  phoneMismatchError.classList.add('hidden');Â  Â  Â  Â  Â  Â  showStep(3);Â  Â  Â  Â });Â  Â  Â  Â Â 
Â  Â  Â  Â  backButtonStep2.addEventListener('click',()=>{Â  Â  Â  Â  Â  Â  showStep(1);Â  Â  Â  Â });Â  Â  Â  Â  backButtonStep3.addEventListener('click',()=>{Â  Â  Â  Â  Â  Â  showStep(2);Â  Â  Â  Â });Â  Â  Â  Â  function openCheckoutModal(packageId,lang){Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  switchLang(lang);Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  variantSelect.value=packageId;Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  variantSelect.dispatchEvent(new Event('change'));Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  showStep(1);Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  checkoutModal.classList.remove('modal-hidden');Â  Â  Â  Â  Â  Â  document.body.classList.add('overflow-hidden');Â  Â  Â  Â }
Â  Â  Â  Â  function closeCheckoutModal(){Â  Â  Â  Â  Â  Â  checkoutModal.classList.add('modal-hidden');Â  Â  Â  Â  Â  Â  document.body.classList.remove('overflow-hidden');Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  document.getElementById('confirmation-modal').classList.add('modal-hidden');Â  Â  Â  Â  Â  Â  document.getElementById('success-message').classList.add('hidden');Â  Â  Â  Â }
Â  Â  Â  Â 
Â  Â  Â  Â  const GOOGLE_SCRIPT_URL='https://script.google.com/macros/s/AKfycbwDyvrE3gVhvxUPiXLwk_M_p_z-vO1acq2nljXK10HonrJCkne00zNIKhx7lecE5cc2ug/exec';Â  Â  Â  Â  const sellerWhatsappNumber='212768356015';Â  Â  Â  Â  const form=document.getElementById('checkout-form');Â  Â  Â  Â  const fullNameInput=document.getElementById('full-name');Â  Â  Â  Â  const phoneInput=document.getElementById('phone-number');Â  Â  Â  Â  const confirmPhoneInput=document.getElementById('confirm-phone-number');Â  Â  Â  Â  const addressInput=document.getElementById('full-address');Â  Â  Â  Â  const phoneFormatError=document.getElementById('phone-format-error');Â  Â  Â  Â  const phoneMismatchError=document.getElementById('phone-mismatch-error');Â  Â  Â  Â  const confirmationModal=document.getElementById('confirmation-modal');Â  Â  Â  Â  const confirmModalContent=document.getElementById('modal-content-confirm');Â  Â  Â  Â  const confirmButton=document.getElementById('confirm-button');Â  Â  Â  Â  const confirmButtonText=document.getElementById('confirm-button-text');Â  Â  Â  Â  const editButton=document.getElementById('edit-button');Â  Â  Â  Â  const successMessage=document.getElementById('success-message');Â  Â  Â  Â  const submitButton=document.getElementById('submit-button');Â  Â  Â  Â  editButton.addEventListener('click',function(){Â  Â  Â  Â  Â  Â  hideConfirmDialog();Â  Â  Â  Â  Â  Â  document.getElementById('submit-button').classList.remove('hidden')});Â  Â  Â  Â  function setInitialPriceDisplay(){Â  Â  Â  Â  Â  Â  priceDisplay.innerHTML=`--.-- ${currencySymbol}`;Â  Â  Â  Â }
Â  Â  Â  Â  function generateOrderId(){Â  Â  Â  Â  Â  Â  const timestamp=Date.now().toString();Â  Â  Â  Â  Â  Â  const uniquePart=timestamp.substring(timestamp.length-6);Â  Â  Â  Â  Â  Â  return `LXLY-3126-${uniquePart}`;Â  Â  Â  Â }
Â  Â  Â  Â Â 
Â  Â  Â  Â  function showConfirmDialog(){Â  Â  Â  Â  Â  Â  confirmationModal.classList.remove('modal-hidden');Â  Â  Â  Â  Â  Â  submitButton.parentElement.classList.add('hidden');Â  Â  Â  Â  Â  Â  setTimeout(()=>{Â  Â  Â  Â  Â  Â  Â  Â  confirmModalContent.style.transform='scale(1)';Â  Â  Â  Â  Â  Â  Â  Â  confirmModalContent.style.opacity='1';Â  Â  Â  Â  Â  Â },50);Â 
Â  Â  Â  Â }
Â  Â  Â  Â  function hideConfirmDialog(){Â  Â  Â  Â  Â  Â  confirmModalContent.style.transform='scale(0.95)';Â  Â  Â  Â  Â  Â  confirmModalContent.style.opacity='0';Â  Â  Â  Â  Â  Â  submitButton.parentElement.classList.remove('hidden');Â  Â  Â  Â  Â  Â  setTimeout(()=>{Â  Â  Â  Â  Â  Â  Â  Â  confirmationModal.classList.add('modal-hidden');Â  Â  Â  Â  Â  Â },300);Â  Â  Â  Â }
Â  Â  Â  Â  variantSelect.addEventListener('change',function(event){Â  Â  Â  Â  Â  Â  const selectedOption=event.target.options[event.target.selectedIndex];Â  Â  Â  Â  Â  Â  const newPrice=selectedOption.getAttribute('data-price');Â  Â  Â  Â  Â  Â  const oldPrice=selectedOption.getAttribute('data-old-price');Â  Â  Â  Â  Â  Â  if(newPrice&&newPrice!=="0"){Â  Â  Â  Â  Â  Â  Â  Â  let priceHTML=`<span>${parseFloat(newPrice).toFixed(0)} ${currencySymbol}</span>`;Â  Â  Â  Â  Â  Â  Â  Â  if(oldPrice&&parseFloat(oldPrice)>parseFloat(newPrice)){Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  priceHTML+=` <s class="text-red-500 font-normal text-lg ml-2">${parseFloat(oldPrice).toFixed(0)} ${currencySymbol}</s>`;Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â  priceDisplay.innerHTML=priceHTML;Â  Â  Â  Â  Â  Â }else{Â  Â  Â  Â  Â  Â  Â  Â  setInitialPriceDisplay();Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â });Â  Â  Â  Â  form.addEventListener('submit',function(e){Â  Â  Â  Â  Â  Â  e.preventDefault();Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const selectedOption=variantSelect.options[variantSelect.selectedIndex];Â  Â  Â  Â  Â  Â  document.getElementById('confirm-order-id').innerText=generateOrderId();Â  Â  Â  Â  Â  Â  document.getElementById('confirm-name').innerText=fullNameInput.value;Â  Â  Â  Â  Â  Â  document.getElementById('confirm-phone').innerText=phoneInput.value;Â  Â  Â  Â  Â  Â  document.getElementById('confirm-address').innerText=addressInput.value;Â  Â  Â  Â  Â  Â  document.getElementById('confirm-call-time').innerText=document.getElementById('note').value;Â  Â  Â  Â  Â  Â  document.getElementById('confirm-delivery-note').innerText=document.getElementById('delivery-note').value||'N/A';Â  Â  Â  Â  Â  Â  document.getElementById('confirm-variant').innerText=translations[currentLang][selectedOption.getAttribute('data-lang-key')];Â  Â  Â  Â  Â  Â  document.getElementById('confirm-price').innerText=`${parseFloat(selectedOption.getAttribute('data-price')).toFixed(0)} ${currencySymbol}`;Â  Â  Â  Â  Â  Â  showConfirmDialog();Â  Â  Â  Â  Â  Â  document.getElementById('submit-button').classList.add('hidden');Â  Â  Â  Â });Â  Â  Â  Â  confirmButton.addEventListener('click',function(){Â  Â  Â  Â  Â  Â  confirmButton.disabled=!0;Â  Â  Â  Â  Â  Â  editButton.disabled=!0;Â  Â  Â  Â  Â  Â  confirmButtonText.innerText=translations[currentLang].Processing;Â  Â  Â  Â  Â  Â  const selectedOption=variantSelect.options[variantSelect.selectedIndex];Â  Â  Â  Â  Â  Â  const finalPrice=parseFloat(selectedOption.getAttribute('data-price')).toFixed(0);Â  Â  Â  Â  Â  Â  let rawClientPhone=phoneInput.value.trim();Â  Â  Â  Â  Â  Â  if(rawClientPhone.length===9&&(rawClientPhone.startsWith('6')||rawClientPhone.startsWith('7'))){Â  Â  Â  Â  Â  Â  Â  Â  rawClientPhone='0'+rawClientPhone;Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  const phoneForGoogleSheet="'"+rawClientPhone;Â  Â  Â  Â  Â  Â  const orderId=document.getElementById('confirm-order-id').innerText;Â  Â  Â  Â  Â  Â  const productTitle=document.getElementById('product-title').innerText;Â  Â  Â  Â  Â  Â  const sku=document.getElementById('sku').value;Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â Â 
const consultationTime=document.getElementById('note').value;const clientNoteText=translations[currentLang].ClientNote.replace('{time}',consultationTime);const sellerNoteText=translations[currentLang].SellerNote;const combinedNote=`${clientNoteText}\n${sellerNoteText}`;const data={Â  Â  orderId:orderId,Â  Â  productTitle:productTitle,Â  Â  sku:sku,Â  Â  productPrice:`${finalPrice} ${currencySymbol}`,Â  Â  productVariant:variantSelect.value,Â  Â  clientName:fullNameInput.value,Â  Â  clientPhone:phoneForGoogleSheet,Â  Â  clientAddress:addressInput.value,Â  Â  note:combinedNote,Â  Â  delivery_note:document.getElementById('delivery-note').value,};Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  const message=`*New Order* ðŸ”¥\n-------------------\n*Order ID:* ${orderId}\n\n*Product:* ${productTitle}\n*SKU:* ${data.sku}\n*Quantity:* ${data.productVariant} bottle(s)\n*Price:* ${data.productPrice}\n\n*Client Details:*\n*Name:* ${data.clientName}\n*Phone:* ${rawClientPhone}\n*Address:* ${data.clientAddress}\n\n*Consultation & Notes:*\n${data.note}\n\n*Delivery Note:* ${data.delivery_note || 'None'}`;Â  Â  Â  Â  Â  Â  const encodedMessage=encodeURIComponent(message.trim());Â  Â  Â  Â  Â  Â  const whatsappURL=`https://wa.me/${sellerWhatsappNumber}?text=${encodedMessage}`;Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  fetch(GOOGLE_SCRIPT_URL,{Â  Â  Â  Â  Â  Â  Â  Â  method:'POST',Â  Â  Â  Â  Â  Â  Â  Â  mode:'no-cors',Â  Â  Â  Â  Â  Â  Â  Â  headers:{'Content-Type':'application/json'},Â  Â  Â  Â  Â  Â  Â  Â  body:JSON.stringify(data)
Â  Â  Â  Â  Â  Â })
Â  Â  Â  Â  Â  Â .then(()=>{Â  Â  Â  Â  Â  Â  Â  Â  hideConfirmDialog();Â  Â  Â  Â  Â  Â  Â  Â  successMessage.classList.remove('hidden');Â  Â  Â  Â  Â  Â  Â  Â  pushOrderData({Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  orderId:data.orderId,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  productPrice:finalPrice,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  productVariant:data.productVariant,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  productTitle:data.productTitle,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sku:data.sku
Â  Â  Â  Â  Â  Â  Â  Â });Â  Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(()=>{Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.open(whatsappURL,'_blank');Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(()=>{Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  form.reset();Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setInitialPriceDisplay();Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  closeCheckoutModal();Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmButton.disabled=!1;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  editButton.disabled=!1;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmButtonText.innerText=translations[currentLang].ConfirmButton;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â },1000);Â  Â  Â  Â  Â  Â  Â  Â },800);Â  Â  Â  Â  Â  Â })
Â  Â  Â  Â  Â  Â .catch(error=>{Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error submitting to Google Sheet:',error);Â  Â  Â  Â  Â  Â  Â  Â  alert('An error occurred while submitting your order. Please try again.');Â  Â  Â  Â  Â  Â  Â  Â  hideConfirmDialog();Â  Â  Â  Â  Â  Â  Â  Â  confirmButton.disabled=!1;Â  Â  Â  Â  Â  Â  Â  Â  editButton.disabled=!1;Â  Â  Â  Â  Â  Â  Â  Â  confirmButtonText.innerText=translations[currentLang].ConfirmButton;Â  Â  Â  Â  Â  Â });Â  Â  Â  Â });Â  Â 
Â  Â  document.addEventListener('DOMContentLoaded',()=>{Â  Â  Â  Â  const savedLang=localStorage.getItem('selectedLang')||'en';Â  Â  Â  Â  switchLang(savedLang);Â  Â  Â  Â 
Â  Â  Â  Â  let lastScrollTop=0;Â  Â  Â  Â  const header=document.querySelector('header');Â  Â  Â  Â  window.addEventListener("scroll",function(){Â  Â  Â  Â  Â  Â  let scrollTop=window.pageYOffset||document.documentElement.scrollTop;Â  Â  Â  Â  Â  Â  if(scrollTop>lastScrollTop&&scrollTop>header.offsetHeight){Â  Â  Â  Â  Â  Â  Â  Â  header.style.top=`-${header.offsetHeight + 10}px`;Â  Â  Â  Â  Â  Â }else{Â  Â  Â  Â  Â  Â  Â  Â  header.style.top="0";Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  lastScrollTop=scrollTop<=0?0:scrollTop;Â  Â  Â  Â },!1);Â  Â  Â  Â Â 
Â  Â  Â  Â  setInitialPriceDisplay();Â  Â });Â  Â </script>
